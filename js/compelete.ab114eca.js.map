{"version":3,"file":"js/compelete.ab114eca.js","mappings":"iMACOA,MAAM,kB,GAcJA,MAAM,a,GAEFA,MAAM,kB,8MAhBjBC,EAAAA,EAAAA,IAwBM,MAxBNC,EAwBM,EAvBJC,EAAAA,EAAAA,IAKiBC,EAAAA,KAAAA,CAJJC,OAAK,SACd,IAAkE,EAAlEF,EAAAA,EAAAA,IAAkEG,EAAAA,CAAxDC,KAAK,UAAUC,MAAA,GAAOC,QAAOC,EAAAA,Y,mBAAY,IAAI,UAAJ,W,qBACnDP,EAAAA,EAAAA,IAA+DG,EAAAA,CAArDC,KAAK,UAAWE,QAAOC,EAAAA,e,mBAAe,IAAI,UAAJ,W,8BAIpDP,EAAAA,EAAAA,IAKkBQ,EAAAA,CALDX,MAAM,iBAAe,C,kBACpC,IAGE,EAHFG,EAAAA,EAAAA,IAGES,EAAAA,CAFCC,cAAeH,EAAAA,cACfI,oBAAmBJ,EAAAA,mB,0DAGxBK,EAAAA,EAAAA,GASM,MATNC,EASM,EARJb,EAAAA,EAAAA,IAOWc,EAAAA,CAPDjB,MAAM,uBAAqB,C,kBACnC,IAKM,EALNe,EAAAA,EAAAA,GAKM,MALNG,EAKM,EAJJH,EAAAA,EAAAA,GAAkC,OAA5BI,IAAKT,EAAAA,aAAcU,IAAI,I,yBAC7BnB,EAAAA,EAAAA,IAEMoB,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IAFeX,EAAAA,QAATY,K,WAAZrB,EAAAA,EAAAA,IAEM,OAFwBsB,IAAKD,EAAOtB,MAAM,gB,EAC9Ce,EAAAA,EAAAA,GAA2B,OAArBI,IAAKG,EAAOF,IAAI,I,oHAgBlC,GAAeI,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,gBACNC,WAAY,CAAEC,eAAc,IAAEC,mBAAkBA,EAAAA,GAChDC,QACE,MAAMC,GAASC,EAAAA,EAAAA,MAETlB,GAAgBmB,EAAAA,EAAAA,KAAI,GACpBC,EAAoB,KACxBpB,EAAcqB,MAAQC,IAAkBC,GAAgB,EAEpDA,EAAkB,KACtBvB,EAAcqB,OAAQ,CAAG,EAErBC,EAAgB,KACpBtB,EAAcqB,OAAQ,CAAI,EAGtBG,GAAQC,EAAAA,EAAAA,MACRC,GAAeP,EAAAA,EAAAA,IAAIK,EAAMG,MAAMD,cAC/BE,GAAST,EAAAA,EAAAA,IAAI,IACbU,GAAqBV,EAAAA,EAAAA,IAAIK,EAAMG,MAAME,oBAIrCC,GAASX,EAAAA,EAAAA,IAAI,OACnBY,EAAAA,EAAAA,KAAU,KACRC,EAAAA,GAAAA,QAAgB,QAChBR,EAAMS,OAAO,qBAAsB,GAEnCJ,EAAmBR,MAAMa,SAASC,IAChC,MAAMC,EAAYD,EAASE,UAAU,cACrCT,EAAOP,MAAMiB,KAAKF,EAAU,GAC5B,IAGJ,MAAMG,EAAa,KACjBtB,EAAOqB,KAAK,CAAE1B,KAAM,aAAc,EAG9B4B,EAAgB,MACpBC,EAAAA,EAAAA,GAAqBZ,EAAmBR,MAAM,EAG1CqB,EAAa,KACjBlB,EAAMS,OAAO,eAAgB,MAC7BhB,EAAO0B,QAAQ,CAAE/B,KAAM,QAAS,EAGlC,MAAO,CACLgB,SACAE,SACAJ,eACA1B,gBACAoB,oBACAmB,aACAC,gBACAE,aAEJ,I,QCvFF,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://2022-f2e-week2/./src/views/sign-and-send/compelete/CompeleteView.vue","webpack://2022-f2e-week2/./src/views/sign-and-send/compelete/CompeleteView.vue?a1cc"],"sourcesContent":["<template>\n  <div class=\"compelete-page\">\n    <SignSendNavbar>\n      <template #right>\n        <a-button type=\"primary\" ghost @click=\"goTaskPage\">返回主頁</a-button>\n        <a-button type=\"primary\" @click=\"handleClickOk\">下載檔案</a-button>\n      </template>\n    </SignSendNavbar>\n\n    <a-layout-header class=\"layout-header\">\n      <AssignFiieldHeader\n        :visableDrawer=\"visableDrawer\"\n        @togglePreviewSide=\"togglePreviewSide\"\n      />\n    </a-layout-header>\n    <div class=\"container\">\n      <a-layout class=\"page-layout bg-gray\">\n        <div class=\"compelete-view\">\n          <img :src=\"compeleteSrc\" alt=\"\" />\n          <div v-for=\"image in images\" :key=\"image\" class=\"preview-item\">\n            <img :src=\"image\" alt=\"\" />\n          </div>\n        </div>\n      </a-layout>\n    </div>\n  </div>\n</template>\n<script>\nimport { defineComponent, onMounted, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { message } from 'ant-design-vue'\nimport SignSendNavbar from '@/components/sign-and-send/SignSendNavbar.vue'\nimport AssignFiieldHeader from '@/components/assign-fields/AssignFiieldHeader.vue'\nimport { downloadMultiPagePDF } from '@/helper/downloadPDF'\n\nexport default defineComponent({\n  name: 'CompeleteView',\n  components: { SignSendNavbar, AssignFiieldHeader },\n  setup() {\n    const router = useRouter()\n\n    const visableDrawer = ref(false)\n    const togglePreviewSide = () => {\n      visableDrawer.value ? drawerOnClose() : showPreviewSide()\n    }\n    const showPreviewSide = () => {\n      visableDrawer.value = true\n    }\n    const drawerOnClose = () => {\n      visableDrawer.value = false\n    }\n\n    const store = useStore()\n    const compeleteSrc = ref(store.state.compeleteSrc)\n    const images = ref([])\n    const canvasInstanceList = ref(store.state.canvasInstanceList)\n\n    // const compeleteSrc = localStorage.getItem('img')\n\n    const canvas = ref(null)\n    onMounted(() => {\n      message.success('創建成功')\n      store.commit('SET_PROGRESS_STATE', 3)\n\n      canvasInstanceList.value.forEach((instance) => {\n        const canvasUrl = instance.toDataURL('image/JPEG')\n        images.value.push(canvasUrl)\n      })\n    })\n\n    const goNextPage = () => {\n      router.push({ name: 'compelete' })\n    }\n\n    const handleClickOk = () => {\n      downloadMultiPagePDF(canvasInstanceList.value)\n    }\n\n    const goTaskPage = () => {\n      store.commit('SET_PDF_FILE', null)\n      router.replace({ name: 'task' })\n    }\n\n    return {\n      images,\n      canvas,\n      compeleteSrc,\n      visableDrawer,\n      togglePreviewSide,\n      goNextPage,\n      handleClickOk,\n      goTaskPage\n    }\n  }\n})\n</script>\n<style lang=\"scss\" scoped>\n.compelete-view {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  img {\n    margin-bottom: 20px;\n    max-width: 100%;\n  }\n}\n\n.compelete-page {\n  .layout-header {\n    position: relative;\n    z-index: 10;\n    background-color: #fff;\n    padding-left: 24px;\n    padding-right: 24px;\n    filter: drop-shadow(0px 0px 15px rgba(25, 26, 27, 0.08));\n  }\n\n  .site-layout .site-layout-background {\n    background: #fff;\n  }\n\n  .page-layout {\n    // FIXME:\n    // min-height: 100vh;\n    // height: calc(100vh - 68px - 64px);\n    .ant-layout-sider {\n      background-color: #fff;\n    }\n\n    ::v-deep(.ant-layout-sider-trigger) {\n      background-color: #1890ff;\n    }\n\n    .layout-sider {\n      box-shadow: 0px 0px 15px rgba(25, 26, 27, 0.08);\n    }\n  }\n\n  .sign-btn {\n    display: block;\n    width: 100%;\n  }\n}\n</style>\n","import { render } from \"./CompeleteView.vue?vue&type=template&id=65dc2fd0&scoped=true\"\nimport script from \"./CompeleteView.vue?vue&type=script&lang=js\"\nexport * from \"./CompeleteView.vue?vue&type=script&lang=js\"\n\nimport \"./CompeleteView.vue?vue&type=style&index=0&id=65dc2fd0&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/xujingyuan/yuan/my_repos/2022-f2e-week2-test/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-65dc2fd0\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_SignSendNavbar","right","_component_a_button","type","ghost","onClick","_ctx","_component_a_layout_header","_component_AssignFiieldHeader","visableDrawer","onTogglePreviewSide","_createElementVNode","_hoisted_2","_component_a_layout","_hoisted_3","src","alt","_Fragment","image","key","defineComponent","name","components","SignSendNavbar","AssignFiieldHeader","setup","router","useRouter","ref","togglePreviewSide","value","drawerOnClose","showPreviewSide","store","useStore","compeleteSrc","state","images","canvasInstanceList","canvas","onMounted","message","commit","forEach","instance","canvasUrl","toDataURL","push","goNextPage","handleClickOk","downloadMultiPagePDF","goTaskPage","replace","__exports__","render"],"sourceRoot":""}